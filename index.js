!function(t){function e(e){for(var i,n,a=e[0],r=e[1],h=0,c=[];h<a.length;h++)n=a[h],s[n]&&c.push(s[n][0]),s[n]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);for(o&&o(e);c.length;)c.shift()()}var i={},s={0:0};function n(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.e=function(t){var e=[],i=s[t];if(0!==i)if(i)e.push(i[2]);else{var a=new Promise(function(e,n){i=s[t]=[e,n]});e.push(i[2]=a);var r,h=document.createElement("script");h.charset="utf-8",h.timeout=120,n.nc&&h.setAttribute("nonce",n.nc),h.src=function(t){return n.p+""+t+".index.js"}(t),r=function(e){h.onerror=h.onload=null,clearTimeout(o);var i=s[t];if(0!==i){if(i){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+n+": "+a+")");r.type=n,r.request=a,i[1](r)}s[t]=void 0}};var o=setTimeout(function(){r({type:"timeout",target:h})},12e4);h.onerror=h.onload=r,document.head.appendChild(h)}return Promise.all(e)},n.m=t,n.c=i,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n.oe=function(t){throw console.error(t),t};var a=window.webpackJsonp=window.webpackJsonp||[],r=a.push.bind(a);a.push=e,a=a.slice();for(var h=0;h<a.length;h++)e(a[h]);var o=r;n(n.s=0)}([function(t,e,i){"use strict";i.r(e);var s=new class{constructor(){this.subscriptionsById={},window.Worker?this.worker=new window.Worker("./worker.js"):(this.worker={postMessage(t){window.onmessage({data:t})}},window.postMessage=(t=>{this.worker.onmessage({data:t})})),this.worker.onmessage=(({data:t})=>{const{id:e}=t;this.subscriptionsById[e]&&"function"==typeof this.subscriptionsById[e]&&this.subscriptionsById[e](t)})}subscribe(t,e){this.subscriptionsById[t]=e}request({id:t,reason:e,payload:i}){this.worker.postMessage({id:t,reason:e,payload:i})}};class n{constructor(t,e,i,n,a){this.id=t,this.lineRenderer=e,this.rulerRenderer=i,this.datesRenderer=n,this.sampleRenderer=a,this.range=null,this.renderData=null,this.renderCache=null,s.subscribe(this.id,t=>{const{reason:s,payload:r}=t;this.renderCache=r,e.render(r);const h=Object.keys(r.linesByName).length?r:{max:null,x:null};i&&i.render(h),n&&n.render(h),a&&a.render(h)})}setData({x:t,linesByName:e}){this.renderData={x:t,linesByName:Object.entries(e).reduce((t,[e,i])=>({...t,[e]:i}),{})}}updateRange(t){t&&(this.range=t),this.triggerRender({reason:"RANGE"})}showLines(t){t.forEach(({name:t,color:e,values:i})=>{this.renderData.linesByName[t]={color:e,values:i}}),this.triggerRender({reason:"LINES",lines:t})}hideLines(t){t.forEach(({name:t})=>{delete this.renderData.linesByName[t]}),this.triggerRender({reason:"LINES"})}triggerRender({reason:t,lines:e}){this.requestId++,s.request({id:this.id,reason:t,payload:{renderData:this.renderData,renderCache:this.renderCache,range:this.range,lines:e}})}setColors(t){this.lineRenderer.setColors(t),this.rulerRenderer.setColors(t),this.datesRenderer.setColors(t),this.sampleRenderer.setColors(t)}}const a=(t,e=1)=>{const i=/([A-F\d]{2})([A-F\d]{2})([A-F\d]{2})$/i.exec(t).slice(1).map(t=>parseInt(t,16));return`rgb(${i[0]},${i[1]},${i[2]},${e})`};class r{constructor(t,e=1){this.canvas=t,this.ctx=t.getContext("2d"),this.ctx.translate(0,this.canvas.height),this.ctx.scale(1,-1),this.renderQueue=[],this.isRendering=!1,this.lineWidth=e}render(t){this.isRendering?this.renderQueue.push(t):(this.isRendering=!0,requestAnimationFrame(()=>{const e=Object.values(t.linesByName).map(({renderValues:t,color:e,opacity:i})=>({path:this.createPath(t),color:e,opacity:i}));this.ctx.save(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),e.forEach(({path:t,color:e,opacity:i})=>{this.ctx.strokeStyle=a(e,i),this.ctx.lineWidth=this.lineWidth,this.ctx.lineJoin="round",this.ctx.stroke(t)}),this.ctx.restore(),this.isRendering=!1,this.renderQueue.length&&this.render(this.renderQueue.shift())}))}createPath(t){const e=new Path2D,i=1/(t.length-1);return t.forEach((t,s)=>{const n={x:i*s*this.canvas.width,y:t*this.canvas.height};e.lineTo(n.x,n.y)}),e}setColors({primary:t,secondary:e}){this.canvas.style.backgroundColor=t}}class h{constructor(t,e){this.controller=new n(t,e)}setData(t){this.controller.setData(t)}updateRange(t){this.controller.updateRange(t)}showLines(t){this.controller.showLines(t)}hideLines(t){this.controller.hideLines(t)}setColors({primary:t,secondary:e}){}}const o=5;class c{constructor(t,e){this.view=t,this.ctx=this.view.getContext("2d"),this.minRange=this.view.width*e,this.leftX=0,this.rightX=this.minRange+o}init(){this.update(),this.view.onmouseup=(()=>{this.view.onmousemove=null}),this.view.onmouseout=(()=>{this.view.onmousemove=null}),this.view.onmousedown=(t=>{if(t.layerX>=this.leftX&&t.layerX<=this.leftX+o)this.view.onmousemove=(t=>{const e=t.layerX-this.leftX,i=this.leftX+e;i<0?this.leftX=0:i>this.rightX-o-this.minRange?this.leftX=this.rightX-o-this.minRange:this.leftX=i,this.update()});else if(t.layerX>=this.rightX-o&&t.layerX<=this.rightX)this.view.onmousemove=(t=>{const e=t.layerX-this.rightX,i=this.rightX+e;i<this.leftX+o+this.minRange?this.rightX=this.leftX+o+this.minRange:i>this.view.width?this.rightX=this.view.width:this.rightX=i,this.update()});else if(t.layerX>this.leftX+o&&t.layerX<this.rightX-o){let e=t.layerX;this.view.onmousemove=(t=>{const i=t.layerX-e;this.leftX+i<0?(this.rightX+=-this.leftX,this.leftX=0):this.rightX+i>this.view.width?(this.leftX+=this.view.width-this.rightX,this.rightX=this.view.width):(this.leftX+=i,this.rightX+=i),e=t.layerX,this.update()})}})}drawLeftSide(){this.ctx.fillStyle=a(this.colors.secondary,.1),this.ctx.fillRect(0,0,this.leftX,this.view.height),this.ctx.fillStyle=a(this.colors.secondary,.2),this.ctx.fillRect(this.leftX,0,o,this.view.height)}drawRightSide(){this.ctx.fillStyle=a(this.colors.secondary,.2),this.ctx.fillRect(this.rightX-o,0,o,this.view.height),this.ctx.fillStyle=a(this.colors.secondary,.1),this.ctx.fillRect(this.rightX,0,this.view.width,this.view.height)}drawBorders(){const t=this.rightX-this.leftX-2*o;this.ctx.fillStyle=a(this.colors.secondary,.2),this.ctx.fillRect(this.leftX+o,0,t,2),this.ctx.fillRect(this.leftX+o,this.view.height-2,t,2)}render(){this.ctx.clearRect(0,0,this.view.width,this.view.height),this.drawLeftSide(),this.drawRightSide(),this.drawBorders()}update(){const t=Math.floor(100*this.leftX/this.view.width)/100,e=Math.ceil(100*this.rightX/this.view.width)/100;this.view.dispatchEvent(new CustomEvent("RANGE",{detail:[t,e]})),this.render()}setColors(t){this.colors=t,this.render()}}const l=5,d=20;class m{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.animationId=null,this.animationIteration=0,this.stepY=1/l*this.canvas.height,this.roundedMax=0,this.values=[],this.rulers=[]}render(t){const{max:e}=t;if(null===e)return void this.reset();const i=10**(Math.floor(Math.log10(e))-1),s=Math.round(e/i)*i;if(s===this.roundedMax)return;const n=s/l,a=s-this.roundedMax,r=a/Math.abs(a);this.roundedMax=s;const h=[];for(let t=l;t>-1;t--)h.push(Math.round(n*t));this.reset(),this.animate(h,r)}animate(t,e){let i,s;this.animationIteration++,e>0?(i=t.map((t,e)=>({value:t,y:this.animationIteration/d*this.stepY*e,opacity:this.animationIteration/d*e})),s=this.values.map((t,e)=>({value:t,y:this.stepY*e+this.animationIteration/d*this.stepY*e,opacity:1-this.animationIteration/d*e}))):(i=[...t].reverse().map((t,e)=>({value:t,y:this.canvas.height-this.animationIteration/d*this.stepY*e,opacity:this.animationIteration/d*e})),s=[...this.values].reverse().map((t,e)=>({value:t,y:this.canvas.height-this.stepY*e-this.animationIteration/d*this.stepY*e,opacity:1-this.animationIteration/d*e}))),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderRulers(i),this.renderRulers(s),this.animationIteration<d?this.animationId=requestAnimationFrame(()=>{this.animate(t,e)}):(this.animationIteration=0,this.values=t,this.rulers=i)}renderRulers(t){this.ctx.beginPath(),t.forEach(({value:t,y:e,opacity:i})=>{const s=a(this.colors.secondary,i);this.ctx.strokeStyle=s,this.ctx.fillStyle=s,this.ctx.lineWidth=.1,this.ctx.moveTo(0,e),this.ctx.lineTo(this.canvas.width,e),this.ctx.font="100 normal 10px arial",this.ctx.fillText(t.toString(),2,e-2)}),this.ctx.stroke()}reset(){this.rulers=[],this.animationIteration=0,cancelAnimationFrame(this.animationId),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}setColors(t){this.colors=t,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderRulers(this.rulers)}}const p=20;class u{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.markersDensity=Math.round(this.canvas.width/80),this.timestampsCache=[],this.indexStep=0,this.stepX=0,this.markersByTimestamp={},this.animationIteration=0,this.animationId=null,this.labelsByTimestamp={},this.colors={}}render(t){const{x:e}=t;if(!e)return this.timestampsCache=[],void this.reset({});this.timestampsCache=e;const i=Math.floor(e.length/this.markersDensity);this.stepX=1/(this.timestampsCache.length-1);const s=Object.entries(this.markersByTimestamp).map(([t,e])=>({...e,timestamp:t})).sort((t,e)=>t.timestamp-e.timestamp);if(s.length){const t=this.findMarkerIndex(s[0]);if(~t){let e=t-this.indexStep;for(;e>=0;){const t=this.timestampsCache[e];s.unshift({timestamp:t,label:this.getLabelByTimestamp(t),opacity:1,opacityChange:0}),e-=this.indexStep}}const e=this.findMarkerIndex(s[s.length-1]);if(~e){let t=e+this.indexStep;for(;t<this.timestampsCache.length;){const e=this.timestampsCache[t];s.push({timestamp:e,label:this.getLabelByTimestamp(e),opacity:1,opacityChange:0}),t+=this.indexStep}}}if(this.markersByTimestamp={},s.forEach(({timestamp:t,...e})=>{this.markersByTimestamp[t]={...e}}),Math.abs(i-this.indexStep)<2)this.renderMarkers(this.markersByTimestamp);else{const t={};this.indexStep=i;let s=0;for(;s<e.length;)t[e[s]]={label:this.getLabelByTimestamp(e[s]),opacity:0,opacityChange:1},s+=this.indexStep;Object.entries(t).forEach(([t,e])=>{this.markersByTimestamp[t]&&(e={...e,opacity:1,opacityChange:0})}),Object.entries(this.markersByTimestamp).forEach(([e,i])=>{t[e]||(t[e]={...i,opacity:1,opacityChange:-1})}),this.animationId&&this.reset(t),this.animate(t)}}reset(t){cancelAnimationFrame(this.animationId),this.animationId=null,this.animationIteration=0,this.markersByTimestamp={},Object.entries(t).forEach(([t,e])=>{e.opacityChange>=0&&(this.markersByTimestamp[t]={...e,opacity:1,opacityChange:0})}),this.render({x:this.timestampsCache})}animate(t){this.animationIteration++,this.renderMarkers(t),this.animationIteration<p?this.animationId=requestAnimationFrame(()=>{this.animate(t)}):this.reset(t)}renderMarkers(t){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),Object.entries(t).forEach(([t,e])=>{const i=this.findMarkerIndex({timestamp:t});if(~i){e.opacity+=(this.animationIteration+1)/p*e.opacityChange;const t=e.label,s=this.stepX*i*this.canvas.width,n=this.canvas.height-10;this.ctx.save(),this.ctx.fillStyle=a(this.colors.secondary,e.opacity),this.ctx.font="100 normal 10px arial",this.ctx.fillText(t,s,n),this.ctx.restore()}})}findMarkerIndex(t){return this.timestampsCache.findIndex(e=>e==t.timestamp)}getLabelByTimestamp(t){return this.labelsByTimestamp[t]||(this.labelsByTimestamp[t]=new Date(Number(t)).toLocaleString("en-us",{month:"short",day:"numeric"})),this.labelsByTimestamp[t]}setColors(t){this.colors=t,this.renderMarkers(this.markersByTimestamp)}}class y{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.datesByTimestamp={},this.canvas.onmouseleave=(()=>{this.canvas.onmousemove=null,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}),this.canvas.onmouseenter=(()=>{this.canvas.onmousemove=(t=>{this.update(t.layerX/this.canvas.width)})})}render(t){this.snapshot=t}update(t){if(!this.snapshot.x)return void this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const e=this.snapshot.x.length,i=Math.round((e-1)*t),s=1/(e-1),n=Math.ceil(s*i*this.canvas.width);this.ctx.restore(),this.ctx.save(),this.ctx.lineWidth=.2,this.ctx.beginPath(),this.ctx.strokeStyle=this.colors.secondary,this.ctx.moveTo(n,0),this.ctx.lineTo(n,this.canvas.height),this.ctx.stroke();const r=[];Object.entries(this.snapshot.linesByName).forEach(([t,{values:e,renderValues:s,color:a}])=>{const h=Math.ceil(this.canvas.height-s[i]*this.canvas.height);this.ctx.beginPath(),this.ctx.arc(n,h,3,0,2*Math.PI),this.ctx.lineWidth=3,this.ctx.strokeStyle=a,this.ctx.stroke(),this.ctx.fillStyle=this.colors.primary,this.ctx.fill(),r.push({value:e[i],color:a,name:t})});const h=this.snapshot.x[i];this.datesByTimestamp[h]||(this.datesByTimestamp[h]=new Date(h).toLocaleString("en-us",{weekday:"short",month:"short",day:"numeric"}));const o=this.datesByTimestamp[h],c=this.ctx.measureText(o).width,l=Math.round(r.reduce((t,{value:e})=>Math.max(t,this.ctx.measureText(e.toString()).width),c))+16,d=l+24,m=24+24*r.length,p=n+8+l<this.canvas.width?n+8:n-(8+d);this.ctx.save(),this.ctx.shadowOffsetX=1,this.ctx.shadowOffsetY=1,this.ctx.shadowBlur=3,this.ctx.shadowColor=a(this.colors.secondary,.1),this.ctx.fillRect(p,8,d,m),this.ctx.restore(),this.ctx.fillStyle=this.colors.secondary,this.ctx.font="100 normal 14px arial",this.ctx.fillText(o,p+8,24),r.forEach(({value:t,color:e,name:i},s)=>{const n=24+24*(s+1),a=p+8,r=this.ctx.measureText(t).width;this.ctx.save(),this.ctx.fillStyle=e,this.ctx.font="100 bold 12px arial",this.ctx.fillText(t,a,n),this.ctx.font="100 normal 10px arial",this.ctx.fillText(i,a+r+8,n),this.ctx.restore()})}setColors(t){this.colors=t}}const f=.1;class g{constructor(t,e,i,s){this.container=e,this.data=i,this.colors=s;const a=this.createView(400,300,"absolute"),o=this.createView(400,300,"absolute"),l=this.createView(400,300,"absolute");l.style.marginTop="30px";const d=this.createView(400,300,"relative");this.renderController=new n(`${t}_stage`,new r(a,2),new m(o),new u(l),new y(d)),this.renderController.setData(i),this.renderController.setColors(this.colors);const p=document.createElement("div");p.style.position="relative",p.style.marginTop="30px",p.style.marginBottom="5px",e.appendChild(p),Object.entries(i.linesByName).forEach(([t,e])=>{const i=document.createElement("span");i.style.marginRight="5px",p.appendChild(i);const s=document.createElement("input");s.type="checkbox",s.checked=!0,s.id=`control_${t}`,s.name=t,s.onchange=(()=>{s.checked?(this.renderController.showLines([{name:t,...e}]),this.minimapController.showLines([{name:t,...e}])):(this.renderController.hideLines([{name:t}]),this.minimapController.hideLines([{name:t}]))}),i.appendChild(s);const n=document.createElement("label");n.for=s.id,n.style.color=e.color,n.innerText=t,i.appendChild(n)});const g=this.createView(400,50,"absolute");this.minimapController=new h(`${t}_minimap`,new r(g)),this.minimapController.setData(i),this.minimapController.setColors(this.colors),this.minimapController.updateRange([0,1]);const x=this.createView(400,50,"relative");this.rangeSelector=new c(x,f),x.addEventListener("RANGE",({detail:t})=>{this.renderController.updateRange(t)}),this.rangeSelector.setColors(this.colors),this.rangeSelector.init()}setColors(t){this.colors=t,this.container.style.backgroundColor=t.primary,this.renderController.setColors(t),this.minimapController.setColors(t),this.rangeSelector.setColors(t)}createView(t,e,i){const s=document.createElement("canvas");return s.width=t,s.height=e,s.style.position=i,this.container.appendChild(s),s}}window.onload=(async()=>{const t=await fetch("../chart_data.json"),e=await t.json();window.Worker||await i.e(1).then(i.t.bind(null,1,7));const s=[];e.forEach(t=>{const e={linesByName:{},x:[]};t.columns.forEach(i=>{const s=i.shift();"x"===s?e.x=i:e.linesByName[t.names[s]]={color:t.colors[s],values:i}}),s.push(e)});const n=[],a="#ffffff",r="#00172d",h=document.createElement("div");document.body.appendChild(h);const o=document.createElement("input");o.type="radio",o.id="Day",o.checked=!0,o.onchange=(()=>{o.checked&&(l.checked=!1,document.body.style.backgroundColor=a,n.forEach(t=>{t.setColors({primary:a,secondary:r})}))});const c=document.createElement("label");c.for=o.id,c.style.color="grey",c.innerText=o.id,h.appendChild(c),h.appendChild(o);const l=document.createElement("input");l.type="radio",l.id="Night",l.onchange=(()=>{l.checked&&(o.checked=!1,document.body.style.backgroundColor=r,n.forEach(t=>{t.setColors({primary:r,secondary:a})}))});const d=document.createElement("label");d.for=l.id,d.style.color="grey",d.innerText=l.id,h.appendChild(d),h.appendChild(l),s.forEach((t,e)=>{const i=document.createElement("div");i.style.display="inline-block",i.style.margin="10px",document.body.appendChild(i),n.push(new g(e,i,t,{primary:a,secondary:r}))})})}]);